services:
  postgres:
    image: postgres:latest
    container_name: postgres_db_TCC
    restart: always
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: mydatabase
    ports:
      - '5432:5432'
    volumes:
      - postgres_data:/var/lib/postgresql/data

  postgres-test:
    image: postgres:latest
    container_name: postgres_test_db_TCC
    restart: always
    environment:
      POSTGRES_USER: test_user
      POSTGRES_PASSWORD: test_password
      POSTGRES_DB: test_database
    ports:
      - '5433:5432'
    volumes:
      - postgres_test_data:/var/lib/postgresql/data

  # redis:
  #   image: redis:alpine
  #   container_name: redis_queue
  #   restart: always
  #   ports:
  #     - '6379:6379'
  #   volumes:
  #     - redis_data:/data

  minio-storage:
    image: minio/minio
    ports:
      - 9000:9000
      - 41277:41277
    environment:
      MINIO_ACCESS_KEY: be6b156f1127338b0bc9c6de77279fb5 # generated using node's crypto.randomBytes
      MINIO_SECRET_KEY: 311c8c64ce7ea4d686cb6921ee69eaea # generated using node's crypto.randomBytes
      MINIO_REGION: us-east-2
      MINIO_HTTP_PORT: 9000
    command: minio server /data --console-address 0.0.0.0:41277
    volumes:
      - ./minio-data:/data

volumes:
  postgres_data:
  postgres_test_data:
  # redis_data:
